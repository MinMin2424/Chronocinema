<UserControl x:Class="Chronocinema.Views.LoginScreen"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Chronocinema.Views"
             xmlns:behaviors="clr-namespace:Chronocinema.Behaviors"
             xmlns:converters="clr-namespace:Chronocinema.Converters"
             mc:Ignorable="d" 
             d:Style="{StaticResource ScreenStyle}">

    <UserControl.Resources>
        <converters:StringToVisibilityConverter x:Key="StringToVisibilityConverter"/>
    </UserControl.Resources>

    <Grid Margin="20">
        <Border VerticalAlignment="Center">
            <StackPanel Margin="30">
                
                <!-- Header -->
                <TextBlock Text="Welcome Back"
                           Style="{StaticResource HeaderText}"
                           TextAlignment="Center" Margin="0,0,0,30"/>
                <!-- Email Field -->
                <TextBlock Text="Email"
                           Style="{StaticResource FormLabelText}"
                           VerticalAlignment="Center"/>
                <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                         x:Name="EmailTextBox"
                         Style="{StaticResource ModernTextBox}"
                         behaviors:SimpleShakeBehavior.IsEnabled="True"
                         Margin="0,0,0,25"/>
                <!-- Password Field -->
                <TextBlock Text="Password"
                           Style="{StaticResource FormLabelText}"
                           VerticalAlignment="Center"/>
                <PasswordBox x:Name="PasswordBox"
                             PasswordChanged="PasswordBox_PasswordChanged"
                             Style="{StaticResource PasswordBoxStyle}"
                             behaviors:SimpleShakeBehavior.IsEnabled="True"
                             Margin="0,0,0,25"/>
                <!-- Login Button -->
                <Button Content="Login"
                        Command="{Binding LoginCommand}"
                        Style="{StaticResource PrimaryActionButton}"
                        Width="240" Height="35"
                        Margin="0,10,0,0"
                        IsDefault="True"/>
                <!-- Register Link -->
                <TextBlock Style="{StaticResource LinkTextBlock}">
                    <Run Text="Don't have an account?" Style="{StaticResource RunStyle}"/>
                    <Hyperlink Command="{Binding RegisterCommand}" Style="{StaticResource HyperlinkStyle}">
                        <Run Text="Register"/>
                    </Hyperlink>
                </TextBlock>
                <!-- Error Message -->
                <TextBlock Text="{Binding ErrorMessage}"
                           x:Name="ErrorMessageText"
                           Style="{StaticResource ErrorMessage}"
                           Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}"
                           behaviors:SimpleShakeBehavior.IsEnabled="True"/>

            </StackPanel>
        </Border>
    </Grid>
</UserControl>
